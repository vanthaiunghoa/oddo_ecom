!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(window.jQuery)}(function(t){"use strict";t.fn.ratingLocales={};var e,a,n,r,i,l;e=function(e,a){return null===e||void 0===e||0===e.length||a&&""===t.trim(e)},a=function(t,e){t.removeClass(e).addClass(e)},n=function(t,a,n){var r=e(t.data(a))?t.attr(a):t.data(a);return r||n[a]},r=function(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0},i=function(t,e){return parseFloat(t.toFixed(e))},(l=function(e,a){this.$element=t(e),this.init(a)}).prototype={constructor:l,_parseAttr:function(t,a){var r,i,l,o=this.$element,s=o.attr("type");if("range"===s||"number"===s){switch(i=n(o,t,a),t){case"min":l=0;break;case"max":l=5;break;default:l=.5}return r=e(i)?l:i,parseFloat(r)}return parseFloat(a[t])},listenClick:function(t,e){t.on("click touchstart",function(t){if(t.stopPropagation(),t.preventDefault(),!0===t.handled)return!1;e(t),t.handled=!0})},setDefault:function(t,a){var n=this;e(n[t])&&(n[t]=a)},getPosition:function(t){return(e(t.pageX)?t.originalEvent.touches[0].pageX:t.pageX)-this.$rating.offset().left},listen:function(){var e,a,n=this;n.initTouch(),n.listenClick(n.$rating,function(t){if(n.inactive)return!1;e=n.getPosition(t),n.setStars(e),n.$element.trigger("change").trigger("rating.change",[n.$element.val(),n.$caption.html()]),n.starClicked=!0}),n.$rating.on("mousemove",function(t){n.hoverEnabled&&!n.inactive&&(n.starClicked=!1,e=n.getPosition(t),a=n.calculate(e),n.toggleHover(a),n.$element.trigger("rating.hover",[a.val,a.caption,"stars"]))}),n.$rating.on("mouseleave",function(){!n.hoverEnabled||n.inactive||n.starClicked||(a=n.cache,n.toggleHover(a),n.$element.trigger("rating.hoverleave",["stars"]))}),n.$clear.on("mousemove",function(){var t,e,r;n.hoverEnabled&&!n.inactive&&n.hoverOnClear&&(n.clearClicked=!1,t='<span class="'+n.clearCaptionClass+'">'+n.clearCaption+"</span>",e=n.clearValue,r=n.getWidthFromValue(e),a={caption:t,width:r,val:e},n.toggleHover(a),n.$element.trigger("rating.hover",[e,t,"clear"]))}),n.$clear.on("mouseleave",function(){n.hoverEnabled&&!n.inactive&&!n.clearClicked&&n.hoverOnClear&&(a=n.cache,n.toggleHover(a),n.$element.trigger("rating.hoverleave",["clear"]))}),n.listenClick(n.$clear,function(){n.inactive||(n.clear(),n.clearClicked=!0)}),t(n.$element[0].form).on("reset",function(){n.inactive||n.reset()})},destroy:function(){var a=this,n=a.$element;e(a.$container)||a.$container.before(n).remove(),t.removeData(n.get(0)),n.off("rating").removeClass("hide")},create:function(t){var e=this,a=e.$element;t=t||e.options||{},e.destroy(),a.rating(t)},setTouch:function(t,a){var n,r,i,l,o,s,c,u=this;("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)&&!u.inactive&&(n=t.originalEvent,r=e(n.touches)?n.touches:n.changedTouches,i=u.getPosition(r[0]),a?(u.setStars(i),u.$element.trigger("change").trigger("rating.change",[u.$element.val(),u.$caption.html()]),u.starClicked=!0):(o=(l=u.calculate(i)).val<=u.clearValue?u.fetchCaption(u.clearValue):l.caption,s=u.getWidthFromValue(u.clearValue),c=l.val<=u.clearValue?u.rtl?100-s+"%":s+"%":l.width,u.$caption.html(o),u.$stars.css("width",c)))},initTouch:function(){var t=this;t.$rating.on("touchstart touchmove touchend",function(e){var a="touchend"===e.type;t.setTouch(e,a)})},initSlider:function(t){var a=this;e(a.$element.val())&&a.$element.val(0),a.initialValue=a.$element.val(),a.setDefault("min",a._parseAttr("min",t)),a.setDefault("max",a._parseAttr("max",t)),a.setDefault("step",a._parseAttr("step",t)),(isNaN(a.min)||e(a.min))&&(a.min=0),(isNaN(a.max)||e(a.max))&&(a.max=5),(isNaN(a.step)||e(a.step)||0===a.step)&&(a.step=.5),a.diff=a.max-a.min},init:function(n){var r,i,l,o=this,s=o.$element;o.options=n,t.each(n,function(t,e){o[t]=e}),o.starClicked=!1,o.clearClicked=!1,o.initSlider(n),o.checkDisabled(),o.setDefault("rtl",s.attr("dir")),o.rtl&&s.attr("dir","rtl"),r=o.glyphicon?"":"★",o.setDefault("symbol",r),o.setDefault("clearButtonBaseClass","clear-rating"),o.setDefault("clearButtonActiveClass","clear-rating-active"),o.setDefault("clearValue",o.min),a(s,"form-control hide"),o.$clearElement=e(n.clearElement)?null:t(n.clearElement),o.$captionElement=e(n.captionElement)?null:t(n.captionElement),void 0===o.$rating&&void 0===o.$container&&(o.$rating=t(document.createElement("div")).html('<div class="rating-stars"></div>'),o.$container=t(document.createElement("div")),o.$container.before(o.$rating).append(o.$rating),s.before(o.$container).appendTo(o.$rating)),o.$stars=o.$rating.find(".rating-stars"),o.generateRating(),o.$clear=e(o.$clearElement)?o.$container.find("."+o.clearButtonBaseClass):o.$clearElement,o.$caption=e(o.$captionElement)?o.$container.find(".caption"):o.$captionElement,o.setStars(),o.listen(),o.showClear&&o.$clear.attr({class:o.getClearClass()}),i=s.val(),l=o.getWidthFromValue(i),o.cache={caption:o.$caption.html(),width:(o.rtl?100-l:l)+"%",val:i},s.removeClass("rating-loading")},checkDisabled:function(){var t=this;t.disabled=n(t.$element,"disabled",t.options),t.readonly=n(t.$element,"readonly",t.options),t.inactive=t.disabled||t.readonly},getClearClass:function(){return this.clearButtonBaseClass+" "+(this.inactive?"":this.clearButtonActiveClass)},generateRating:function(){var t=this,n=t.renderClear(),r=t.renderCaption(),i=t.rtl?"rating-container-rtl":"rating-container",l=t.getStars();t.glyphicon?i+=(""===t.symbol?" rating-gly-star":" rating-gly")+t.ratingClass:i+=e(t.ratingClass)?" rating-uni":" "+t.ratingClass,t.$rating.attr("class",i),t.$rating.attr("data-content",l),t.$stars.attr("data-content",l),i=t.rtl?"star-rating-rtl":"star-rating",t.$container.attr("class",i+" rating-"+t.size),t.$container.removeClass("rating-active rating-disabled"),t.inactive?t.$container.addClass("rating-disabled"):t.$container.addClass("rating-active"),e(t.$caption)&&(t.rtl?t.$container.prepend(r):t.$container.append(r)),e(t.$clear)&&(t.rtl?t.$container.append(n):t.$container.prepend(n)),e(t.containerClass)||a(t.$container,t.containerClass)},getStars:function(){var t,e=this,a=e.stars,n="";for(t=1;t<=a;t++)n+=e.symbol;return n},renderClear:function(){var t,n=this;return n.showClear?(t=n.getClearClass(),e(n.$clearElement)?'<div class="'+t+'" title="'+n.clearButtonTitle+'">'+n.clearButton+"</div>":(a(n.$clearElement,t),n.$clearElement.attr({title:n.clearButtonTitle}).html(n.clearButton),"")):""},renderCaption:function(){var t,n=this,r=n.$element.val();return n.showCaption?(t=n.fetchCaption(r),e(n.$captionElement)?'<div class="caption">'+t+"</div>":(a(n.$captionElement,"caption"),n.$captionElement.html(t),"")):""},fetchCaption:function(t){var a,n,r,i,l,o=this,s=parseFloat(t),c=o.starCaptions,u=o.starCaptionClasses;return i="function"==typeof u?u(s):u[s],r="function"==typeof c?c(s):c[s],n=e(r)?o.defaultCaption.replace(/\{rating}/g,s):r,a=e(i)?o.clearCaptionClass:i,l=s===o.clearValue?o.clearCaption:n,'<span class="'+a+'">'+l+"</span>"},getWidthFromValue:function(t){var e=this,a=e.min,n=e.max;return t<=a||a===n?0:t>=n?100:100*(t-a)/(n-a)},getValueFromPosition:function(t){var e,a,n=this,l=r(n.step),o=n.$rating.width();return a=n.diff*t/(o*n.step),a=n.rtl?Math.floor(a):Math.ceil(a),e=i(parseFloat(n.min+a*n.step),l),e=Math.max(Math.min(e,n.max),n.min),n.rtl?n.max-e:e},toggleHover:function(t){var e,a,n,r=this;r.hoverChangeCaption&&(n=t.val<=r.clearValue?r.fetchCaption(r.clearValue):t.caption,r.$caption.html(n)),r.hoverChangeStars&&(e=r.getWidthFromValue(r.clearValue),a=t.val<=r.clearValue?r.rtl?100-e+"%":e+"%":t.width,r.$stars.css("width",a))},calculate:function(t){var a=this,n=e(a.$element.val())?0:a.$element.val(),r=arguments.length?a.getValueFromPosition(t):n,i=a.fetchCaption(r),l=a.getWidthFromValue(r);return a.rtl&&(l=100-l),l+="%",{caption:i,width:l,val:r}},setStars:function(t){var e=this,a=arguments.length?e.calculate(t):e.calculate();e.$element.val(a.val),e.$stars.css("width",a.width),e.$caption.html(a.caption),e.cache=a},clear:function(){var t=this,e='<span class="'+t.clearCaptionClass+'">'+t.clearCaption+"</span>";t.$stars.removeClass("rated"),t.inactive||t.$caption.html(e),t.$element.val(t.clearValue),t.setStars(),t.$element.trigger("rating.clear")},reset:function(){var t=this;t.$element.val(t.initialValue),t.setStars(),t.$element.trigger("rating.reset")},update:function(t){var e=this;arguments.length&&(e.$element.val(t),e.setStars())},refresh:function(e){var a=this;arguments.length&&(a.$rating.off("rating"),void 0!==a.$clear&&a.$clear.off(),a.init(t.extend(a.options,e)),a.showClear?a.$clear.show():a.$clear.hide(),a.showCaption?a.$caption.show():a.$caption.hide(),a.$element.trigger("rating.refresh"))}},t.fn.rating=function(a){var n=Array.apply(null,arguments),r=[];switch(n.shift(),this.each(function(){var i,o=t(this),s=o.data("rating"),c="object"==typeof a&&a,u=c.language||o.data("language")||"en";s||(i=t.extend({},t.fn.rating.defaults),"en"===u||e(t.fn.ratingLocales[u])||(i=t.extend(i,t.fn.ratingLocales[u])),s=new l(this,t.extend(i,c,o.data())),o.data("rating",s)),"string"==typeof a&&r.push(s[a].apply(s,n))}),r.length){case 0:return this;case 1:return r[0];default:return r}},t.fn.rating.defaults={language:"en",stars:5,glyphicon:!0,symbol:null,ratingClass:"",disabled:!1,readonly:!1,rtl:!1,size:"md",showClear:!0,showCaption:!0,starCaptionClasses:{.5:"badge badge-danger",1:"badge badge-danger",1.5:"badge badge-warning",2:"badge badge-warning",2.5:"badge badge-info",3:"badge badge-info",3.5:"badge badge-primary",4:"badge badge-primary",4.5:"badge badge-success",5:"badge badge-success"},clearButton:'<i class="glyphicon glyphicon-minus-sign"></i>',clearButtonBaseClass:"clear-rating",clearButtonActiveClass:"clear-rating-active",clearCaptionClass:"badge badge-secondary",clearValue:null,captionElement:null,clearElement:null,containerClass:null,hoverEnabled:!0,hoverChangeCaption:!0,hoverChangeStars:!0,hoverOnClear:!0},t.fn.ratingLocales.en={defaultCaption:"{rating} Stars",starCaptions:{.5:"Half Star",1:"One Star",1.5:"One & Half Star",2:"Two Stars",2.5:"Two & Half Stars",3:"Three Stars",3.5:"Three & Half Stars",4:"Four Stars",4.5:"Four & Half Stars",5:"Five Stars"},clearButtonTitle:"Clear",clearCaption:"Not Rated"},t.extend(t.fn.rating.defaults,t.fn.ratingLocales.en),t.fn.rating.Constructor=l,t("input.rating").addClass("rating-loading"),t(document).ready(function(){var e=t("input.rating");Object.keys(e).length>0&&e.rating()})});